<div class="cart-page fade-in">
  <div class="page-header">
    <h1 class="page-title">
      YOUR <span class="highlight">COMMAND CENTER</span> CART
    </h1>
    <div class="breadcrumbs">
      <a routerLink="/">STORE</a> <mat-icon>chevron_right</mat-icon> <span>SHOPPING CART</span>
    </div>
  </div>

  @if (cartItems.length === 0) {
  <div class="empty-cart-state">
    <mat-icon class="empty-icon">shopping_cart_off</mat-icon>
    <h2>Seu carrinho está vazio</h2>
    <p>Parece que você ainda não adicionou nenhum equipamento ao seu setup.</p>
    <button class="continue-btn" (click)="continueShopping()">
      EXPLORAR LOJA
    </button>
  </div>
  } @else {
  <div class="cart-layout">
    <!-- Product List -->
    <div class="cart-items-column">
      @for (item of cartItems; track item.product.id) {
      <div class="cart-item-card">
        <div class="item-image">
          @if (item.product.imageUrl) {
          <img [src]="item.product.imageUrl" [alt]="item.product.name">
          } @else {
          <mat-icon>image</mat-icon>
          }
        </div>

        <div class="item-details">
          <span class="item-category">HARDWARE</span>
          <h3 class="item-name">{{ item.product.name }}</h3>

          <div class="item-controls">
            <div class="quantity-control">
              <span class="label">QUANTITY</span>
              <div class="qty-actions">
                <button (click)="decrementQuantity(item)">
                  <mat-icon>remove</mat-icon>
                </button>
                <span class="qty-value">{{ item.quantity }}</span>
                <button (click)="incrementQuantity(item)">
                  <mat-icon>add</mat-icon>
                </button>
              </div>
            </div>

            <button class="remove-btn" (click)="removeItem(item)">
              <mat-icon>delete_outline</mat-icon>
              REMOVE
            </button>
          </div>
        </div>

        <div class="item-price">
          {{ item.product.price * item.quantity | currency:'BRL' }}
        </div>
      </div>
      }
    </div>

    <!-- Order Summary -->
    <div class="summary-column">
      <div class="summary-card">
        <div class="summary-header">
          <mat-icon>receipt_long</mat-icon>
          <h2>ORDER SUMMARY</h2>
        </div>

        <div class="summary-rows">
          <div class="summary-row">
            <span>Subtotal</span>
            <span class="value">{{ subtotal | currency:'BRL' }}</span>
          </div>
          <div class="summary-row">
            <span>Shipping (Standard)</span>
            <span class="value highlight-text">FREE</span>
          </div>
          <div class="summary-row">
            <span>Tax</span>
            <span class="value">{{ tax | currency:'BRL' }}</span>
          </div>
        </div>

        <div class="summary-total">
          <span>Total</span>
          <span class="total-value">{{ total | currency:'BRL' }}</span>
        </div>

        <button class="checkout-btn" (click)="finalizeOrder()" [disabled]="loading">
          @if (loading) {
          <span>PROCESSING...</span>
          } @else {
          <span>PROCEED TO CHECKOUT</span>
          <mat-icon>arrow_forward</mat-icon>
          }
        </button>

        <button class="continue-shopping-btn" (click)="continueShopping()">
          CONTINUE SHOPPING
        </button>

        <div class="secure-checkout">
          <span>SECURE CHECKOUT POWERED BY</span>
          <div class="payment-icons">
            <mat-icon>lock</mat-icon>
            <mat-icon>credit_card</mat-icon>
            <span>Mercado Pago</span>
          </div>
        </div>
      </div>
    </div>
  </div>
  }

  <!-- Recommended Hardware Section -->
  <div class="recommended-section fade-in">
    <div class="section-header">
      <div class="accent-bar"></div>
      <h2>RECOMMENDED HARDWARE</h2>
      <div class="nav-arrows">
        <button mat-icon-button><mat-icon>chevron_left</mat-icon></button>
        <button mat-icon-button><mat-icon>chevron_right</mat-icon></button>
      </div>
    </div>

    <div class="recommended-grid">
      <!-- Mock Items matching image -->
      <div class="rec-card">
        <div class="rec-image">
          <mat-icon>keyboard</mat-icon>
        </div>
        <div class="rec-info">
          <span class="rec-category">PERIPHERALS</span>
          <h3>Apex Pro TKL</h3>
          <span class="rec-price">$179.00</span>
        </div>
      </div>

      <div class="rec-card">
        <div class="rec-image">
          <mat-icon>mouse</mat-icon>
        </div>
        <div class="rec-info">
          <span class="rec-category">PERIPHERALS</span>
          <h3>G Pro X Superlight 2</h3>
          <span class="rec-price">$159.00</span>
        </div>
      </div>

      <div class="rec-card">
        <div class="rec-image">
          <mat-icon>memory</mat-icon>
        </div>
        <div class="rec-info">
          <span class="rec-category">COOLING</span>
          <h3>Kraken Elite 360 RGB</h3>
          <span class="rec-price">$279.00</span>
        </div>
      </div>

      <div class="rec-card">
        <div class="rec-image">
          <mat-icon>storage</mat-icon>
        </div>
        <div class="rec-info">
          <span class="rec-category">STORAGE</span>
          <h3>990 Pro 2TB NVMe</h3>
          <span class="rec-price">$189.00</span>
        </div>
      </div>
    </div>
  </div>
</div>